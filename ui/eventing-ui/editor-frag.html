<div class="event_main">
    <div ng-show="resEditCtrl.showJsonEditor" ng-model="resEditCtrl.currentApp.depcfg" ng-readonly="resEditCtrl.currentApp.deploy" ui-ace="{mode: 'json', useWrapMode:true, }">
    </div>
    <div ng-show="resEditCtrl.showSettings">
        <h4> Internal Settings for {{resEditCtrl.currentApp.appname}} </h4>
        <form name="settingsForm" ng-submit="resEditCtrl.saveSettings(resEditCtrl.currentApp.settings)" novalidate>
            <div class="event_settings">
                DCP Stream Boundary:
                <select ng-model="resEditCtrl.currentApp.settings.dcp_stream_boundary">
                    <option value="everything">Everything</option>
                    <option value="from_now">From Now</option>
                </select>
                <br><br>
                Log Level:
                <select ng-model="resEditCtrl.currentApp.settings.log_level">
                    <option value="INFO">Info</option>
                    <option value="ERROR">Error</option>
                    <option value="WARNING">Warning</option>
                    <option value="DEBUG">Debug</option>
                    <option value="TRACE">Trace</option>
                </select>
                <br><br>
                Batch Size:
                <input name="batchSize" type="number" ng-model="resEditCtrl.currentApp.settings.sock_batch_size" min="1">
                <p ng-show="settingsForm.batchSize.$invalid"> Batch Size &ge; 1 </p>
                <br><br>
                Stats Logger Interval:
                <input name="statsLoginterval" type="number" ng-model="resEditCtrl.currentApp.settings.tick_duration" min="1000">
                <p ng-show="settingsForm.statsLoginterval.$invalid"> Stats Logger Interval &ge; 1000 </p>
                <br><br>
                Checkpoint Interval:
                <input name="checkpointInterval" type="number" ng-model="resEditCtrl.currentApp.settings.checkpoint_interval" min="1000">
                <p ng-show="settingsForm.checkpointInterval.$invalid"> Stats Logger Interval &ge; 1000 </p>
                <br><br>
                Worker Count:
                <input name="worker_count" type="number" ng-model="resEditCtrl.currentApp.settings.worker_count" min="1" max="32">
                <p ng-show="settingsForm.worker_count.$invalid"> 1 &le; Worker Count &le; 32 </p>
                <br><br>
                Timer Thread Count:
                <input name="timer_worker_pool_size" type="number" ng-model="resEditCtrl.currentApp.settings.timer_worker_pool_size" min="1" max="32">
                <p ng-show="settingsForm.worker_count.$invalid"> 1 &le; Timer Thread Count &le; 32 </p>
                <br><br>
                Timer Processing Interval:
                <input name="timer_processing_tick_interval" type="number" ng-model="resEditCtrl.currentApp.settings.timer_processing_tick_interval">
                <br><br>
                Timer Threshold:
                <input name="skip_timer_threshold" type="number" ng-model="resEditCtrl.currentApp.settings.skip_timer_threshold">
                <br><br>
                RBAC
                <br>
                User Name:
                <input type="text" ng-model="resEditCtrl.currentApp.settings.rbacuser">
                <br>
                Password:
                <input type="password" ng-model="resEditCtrl.currentApp.settings.rbacpass" ng-minlength="6">
            </div>
            <button align="left" type="submit" class="btn_1" ng-disabled="settingsForm.$invalid">Submit</button>
        </form>
    </div>
    <div ng-show="resEditCtrl.showLoading">
        <br><br><br><br>
        <div ng-show="!resEditCtrl.currentApp.deploy">
            <input type="file" on-read-file="resEditCtrl.saveAsset(asset, content)" />
            <br><br>
        </div>
        <table>
            <tbody ng-repeat="asset in resEditCtrl.currentApp.assets">
                <tr ng-show="asset.operation !== 'delete'">
                    <td>
                        <input type="text" size=40 ng-model="asset.name" placeholder="asset.name" ng-readonly="resEditCtrl.currentApp.deploy">
                    </td>
                    <td ng-show="!resEditCtrl.currentApp.deploy">
                        <button ng-click="resEditCtrl.deleteAsset(asset)">Delete</button>
                    </td>
                </tr>
        </table>
    </div>
    <div style="padding:6px" ng-show="resEditCtrl.showJSEditor && resEditCtrl.currentApp.debug">
        <button class="btn_1" ng-click="resEditCtrl.setBreakpoint()"> Set Breakpint </button>
        <button class="btn_1" ng-click="resEditCtrl.clearBreakpoints()"> Clear All Breakpint </button>
        <button class="btn_1" ng-click="resEditCtrl.listBreakpoints()"> List Breakpints </button>
        <button class="btn_1" ng-click="resEditCtrl.continue()"> Continue </button>
        <button class="btn_1" ng-click="resEditCtrl.singleStep()"> Single Step </button>
        <button class="btn_1" ng-click="resEditCtrl.stepOver()"> Step Over </button>
        <button class="btn_1" ng-click="resEditCtrl.stepInto()"> Step Into </button>
        <button style="float: right;" class="btn_1" ng-click="resEditCtrl.setMutation()"> Simulate Mutation </button>
        <p style="padding:6px">
        <input type="text" ng-model="resEditCtrl.watchVar" placeholder="Enter expression to evaluate">
        <button class="btn_1" ng-click="resEditCtrl.evalExpr()"> Evaluate </button>
        <button style="float: right;" class="btn_1" ng-click="resEditCtrl.showDbgHistory()"> Debug History </button>
        </p>
    </div>
    <div class="dbg_frame" ng-show="resEditCtrl.showJSEditor && resEditCtrl.currentApp.debug">
        {{resEditCtrl.response}}
    </div>
    <div ng-show="resEditCtrl.currentApp.debug && resEditCtrl.showHistory">
        <button style="float: right;" class="btn_1" ng-click="resEditCtrl.closeDbgHistory()">Close </button>
        <br><br>
        <center><h3> Debug History </h3></center>
        <div class="dbg_frame" ng-repeat="item in resEditCtrl.dbgHistory">
            <h3>Request Sent: </h3> <p> {{item.request}} </p>
            <h3>Response Received: </h3> <p> {{item.response}} </p>
            <br><br>
        </div>
    </div>
    <div ng-show="resEditCtrl.showJSEditor" ng-model="resEditCtrl.currentApp.appcode" ng-readonly="resEditCtrl.currentApp.deploy" ui-ace="{mode: 'javascript', useWrapMode:true, onLoad:resEditCtrl.aceLoaded}">
    </div>
</div>

