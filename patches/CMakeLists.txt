macro(apply_patch)
	execute_process(COMMAND git apply ${CMAKE_CURRENT_SOURCE_DIR}/${ARGV0}.patch
                WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/${ARGV1}/)
endmacro(apply_patch)

apply_patch(cluster_run ns_server)
apply_patch(cluster_connect ns_server)
apply_patch(bucket_info_cache ns_server)
apply_patch(ns_config_default ns_server)
apply_patch(ns_ports_setup ns_server)
apply_patch(menelaus_pluggable_ui ns_server)
apply_patch(ns_cluster_membership ns_server)
apply_patch(classic_ui ns_server)
apply_patch(current_ui ns_server)
apply_patch(couchstore couchstore)
apply_patch(couchdb couchdb)
# apply inspector support for couchdb patch after the above patch
apply_patch(couchdb couchdb_with_inspector)
apply_patch(conn_pool goproj/src/github.com/couchbase/indexing)
apply_patch(dcp goproj/src/github.com/couchbase/indexing)
apply_patch(dcp_feed goproj/src/github.com/couchbase/indexing)
apply_patch(upr goproj/src/github.com/couchbase/indexing)

apply_patch(plasma goproj/src/github.com/couchbase/nitro)
apply_patch(KVv5_feature_disable kv_engine)
